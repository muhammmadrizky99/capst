generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id              Int              @id @default(autoincrement())
  nama            String
  email           String           @unique
  password        String
  createdAt       DateTime         @default(now())
  answers         Answer[]
  recommendations Recommendation[]
}

model Answer {
  id              Int              @id @default(autoincrement())
  userId          Int
  question        String
  answer          String
  user            User             @relation(fields: [userId], references: [id])
  recommendations Recommendation[] // ⬅️ Tambahkan ini
}

// model Answer {
//   id       Int    @id @default(autoincrement())
//   userId   Int
//   question String
//   answer   String
//   user     User   @relation(fields: [userId], references: [id])
// }

model Major {
  id              Int              @id @default(autoincrement())
  name            String           @unique
  description     String
  recommendations Recommendation[]
}

model Recommendation {
  id       Int   @id @default(autoincrement())
  userId   Int
  majorId  Int
  answerId Int // ⬅️ Tambahkan ini
  score    Float

  user   User   @relation(fields: [userId], references: [id])
  major  Major  @relation(fields: [majorId], references: [id])
  answer Answer @relation(fields: [answerId], references: [id]) // ⬅️ Relasi ke Answer
}

// model Recommendation {
//   id       Int    @id @default(autoincrement())
//   userId   Int
//   majorId  Int
//   score    Float
//   user     User   @relation(fields: [userId], references: [id])
//   major    Major  @relation(fields: [majorId], references: [id])
// }
